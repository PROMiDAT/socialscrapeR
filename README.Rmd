---
output: github_document
editor_options: 
  chunk_output_type: console
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# socialscrapeR

El propósito de este paquete es hacer sencillo el proceso de extracción de datos de redes sociales como facebook y twitter.

## Instalación

Puedes instalar la versión de desarrollo con la instrucción:

``` r
install.packages("devtools")
devtools::install_github("PROMiDAT/socialscrapeR")
```
Este paquete utiliza selenium para simular la interacción de un usuario con su cuenta de Facebook por lo que antes de comenzar se debe inicializar el servidor de selenium.

## Iniciar el servidor de selenium 

```{r iniciar_servidor}
library(socialscrapeR)
bot_facebook = fb_bot$new()
```

## Iniciar sesión en Facebook

```{r facebook_login, echo=F}
bot_facebook$login(
  username = "dev.aguero@gmail.com",
  password = "anx21ysi_face.")
```

```{r facebook_login2, eval=F}
bot_facebook$login(
  username = "******@gmai.com",
  password = "********")
```

Nota: Para evitar exponer tus credenciales en tu código se recomienda el uso de paquete [keying](https://github.com/r-lib/keyring).

## Función `get_posts`

Esta función nos retorna un data.frame con la información de las últimas `n` publicaciones de una página, esta función recibe los siguiente parámetros:

  + x = una conexión con selenium creada con la función start_server en la que ya se inicio sesión en una cuenta de Facebook con la función `login_facebook`.
  + **pagename**: nombre de la página
  + **n** : cantidad mínima de publicaciones a descargar
  + **reactions**: si el valor es TRUE se retorna en un data.frame información sobre las reacciones de los usuario a la publicación
  
Veamos algunos ejemplos :

## Extraer las últimas 10 publicaciones de una pagina de Facebook 

```{r}
df <- bot_facebook$get_posts(pagename = "ameliarueda", n = 10, reactions = T)
tibble::glimpse(df)
```

La función `get_posts` retorna los siguiente valores.

  + **page_id** : identificador único de la página
  + **post_id** : identificador único de la publicación
  + **text** : contenido del texto principal de la publicación
  + **n_comments** : cantidad de comentarios
  + **n_shares** : cantidad de compartidos
  + **like**: cantidad de me gusta
  + **love**: cantidad de me encanta
  + **wow**: cantidad de me sorprende
  + **haha**: cantidad de risas
  + **sad**: cantidad de me entristece
  + **angry**: cantidad de me enoja
  + **date_time** : hora y fecha en la que se realizó la publicación
  
  
## Comentarios de una publicación en especifico

Para estraer los comentarios de una publicación debemos indicar el id de la página y el id de la publicación que queremos analizar.

```{r}

comentarios <- bot_facebook$get_comments(page_id = "142921462922", post_id = "10158463086367923")
tibble::glimpse(comentarios)
```

La función `get_comments` retorna los siguiente valores

+ **page_id**: identificador de la página
+ **post_id**: identificador de la publicación
+ **full_name**: nombre del usuario que realizó el comentario
+ **user_name**: nombre de usuario (único) que realizó el comentario
+ **text**: texto del comentario


  
